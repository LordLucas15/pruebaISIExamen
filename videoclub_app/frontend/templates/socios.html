{% extends "base.html" %}
{% block title %}Socios · Videoclub{% endblock %}
{% block content %}
  <h2>Socios</h2>
  <form method="post" class="card">
    <div class="grid-2">
      <label>
        Nombre
        <input type="text" name="nombre" required>
      </label>
      <label>
        Edad
        <input type="number" name="edad" min="1" required>
      </label>
    </div>
    <button class="btn btn-sm" type="submit">Crear socio</button>
  </form>

  <form method="get" class="card">
    <label>
      Buscar socio por nombre o ID
      <input type="text" name="q" value="{{ q or '' }}" placeholder="Ej. Ana o 12">
    </label>
    <button class="btn btn-sm" type="submit">Buscar</button>
  </form>

  <table>
    <thead>
      <tr><th>ID</th><th>Nombre</th><th>Edad</th></tr>
    </thead>
    <tbody>
      {% for s in socios %}
        <tr>
          <td>{{ s.id }}</td>
          <td>{{ s.nombre }}</td>
          <td>{{ s.edad }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if total_pages > 1 %}
    <nav class="pager" aria-label="Paginación de socios">
      {% if page > 1 %}
        <a href="{{ url_for('socios', page=page-1, q=q) }}">« Anterior</a>
      {% endif %}
      <span>Página {{ page }} de {{ total_pages }}</span>
      {% if page < total_pages %}
        <a href="{{ url_for('socios', page=page+1, q=q) }}">Siguiente »</a>
      {% endif %}
    </nav>
  {% endif %}
{% endblock %}
