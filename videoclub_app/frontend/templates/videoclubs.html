{% extends "base.html" %}
{% block title %}Videoclubs · Videoclub{% endblock %}
{% block content %}
  <h2>Videoclubs</h2>
  <form method="post" class="card">
    <div class="grid-2">
      <label>Gerente <input type="text" name="gerente" required></label>
      <label>Ciudad <input type="text" name="ciudad" required></label>
      <label>Calle <input type="text" name="calle" required></label>
      <label>Código postal <input type="text" name="codigo_postal" required></label>
    </div>
    <button class="btn btn-sm" type="submit">Crear videoclub</button>
  </form>

  <form method="get" class="card">
    <label>
      Buscar videoclub por ciudad, gerente o ID
      <input type="text" name="q" value="{{ q or '' }}" placeholder="Ej. Valencia o 3">
    </label>
    <button class="btn btn-sm" type="submit">Buscar</button>
  </form>

  <table>
    <thead>
      <tr><th>ID</th><th>Gerente</th><th>Ciudad</th><th>Calle</th><th>CP</th></tr>
    </thead>
    <tbody>
      {% for v in videoclubs %}
        <tr>
          <td>{{ v.id }}</td>
          <td>{{ v.gerente }}</td>
          <td>{{ v.ciudad }}</td>
          <td>{{ v.calle }}</td>
          <td>{{ v.codigo_postal }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if total_pages > 1 %}
    <nav class="pager" aria-label="Paginación de videoclubs">
      {% if page > 1 %}
        <a href="{{ url_for('videoclubs', page=page-1, q=q) }}">« Anterior</a>
      {% endif %}
      <span>Página {{ page }} de {{ total_pages }}</span>
      {% if page < total_pages %}
        <a href="{{ url_for('videoclubs', page=page+1, q=q) }}">Siguiente »</a>
      {% endif %}
    </nav>
  {% endif %}
{% endblock %}
